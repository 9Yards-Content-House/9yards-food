import{j as e}from"./vendor-ui-BNn_Rh50.js";import{d as V,r as p,L as q}from"./vendor-react-rxBb_eoi.js";import{b as R,F as H,c as L,M as J}from"./MobileNav-CwA-rG_Z.js";import{c as I,u as ee,X as se,a as o}from"./index-Dj-cGOYe.js";import{d as D,p as re}from"./menu-CtCfWpYe.js";import{f as d,g as $,a as te,b as ae}from"./order-DUcZEf7V.js";import{m as g}from"./vendor-motion-KP1LyvFg.js";import{T as ne}from"./truck-yaJn_w0j.js";import{C as oe}from"./chevron-right-DgfYu9aI.js";import{M as ie}from"./minus-kF3nwmeB.js";import{P as U}from"./plus-IjOEQtRT.js";import{T as le}from"./trash-2-h0198ZwO.js";import{C as de}from"./circle-check-big-BfuckHN9.js";import{M as ce}from"./message-circle-CDhZmAlA.js";import{C as me}from"./credit-card-HM9oIcxR.js";import{C as ue}from"./clock-B08S9fHg.js";import"./vendor-utils--BulIq_u.js";import"./vendor-query-DhOFERaQ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=I("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=I("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=I("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),he="FLWPUBK_TEST-2cbeceb8352891cbcd28a983ce8d57ac-X";function W(){const r=new Date().getHours();return r>=12&&r<14||r>=18&&r<20}function ge(x){const r=D.find(i=>i.name===x)?.estimatedTime||"30-45 mins";if(W()){const i=r.match(/(\d+)-(\d+)/);if(i)return`${parseInt(i[1])+15}-${parseInt(i[2])+15} mins`}return r}function ye(x,r,i){const c=x.toUpperCase().trim(),a=re[c];return a?a.minOrder&&r<a.minOrder?{valid:!1,discount:0,discountType:"fixed",message:`Minimum order of ${d(a.minOrder)} required`}:c==="FREESHIP"?{valid:!0,discount:i,discountType:"free_delivery",message:"Free delivery applied!",code:c}:a.type==="percentage"?{valid:!0,discount:Math.round(r*(a.discount/100)),discountType:"percentage",message:`${a.discount}% discount applied!`,code:c}:{valid:!0,discount:a.discount,discountType:"fixed",message:`${d(a.discount)} discount applied!`,code:c}:{valid:!1,discount:0,discountType:"fixed",message:"Invalid promo code"}}function Re(){const x=V(),{state:r,removeItem:i,updateQuantity:c,clearCart:a,cartTotal:n,setUserPreferences:v,addOrderToHistory:Z}=ee(),[m,Y]=p.useState(""),[N,M]=p.useState(""),[t,S]=p.useState(null),[w,k]=p.useState(!1),[P,z]=p.useState(""),f=D.find(s=>s.name===m)?.fee||0,C=5e4,y=n>=C,b=p.useMemo(()=>y||t?.valid&&t.discountType==="free_delivery"?0:f,[y,t,f]),j=p.useMemo(()=>t?.valid?t.discountType==="free_delivery"?f:t.discount:0,[t,f]),h=n+b-(t?.discountType!=="free_delivery"?j:0),T=ge(m),E=W(),B=()=>{if(!N.trim()){o.error("Please enter a promo code");return}const s=ye(N,n,f);S(s),s.valid?o.success(s.message):o.error(s.message)},G=()=>{M(""),S(null),o.info("Promo code removed")},F=()=>r.userPreferences.name?.trim()?r.userPreferences.phone?.trim()?m?r.userPreferences.address?.trim()?!0:(o.error("Please enter your delivery address"),!1):(o.error("Please select a delivery zone"),!1):(o.error("Please enter your phone number"),!1):(o.error("Please enter your name"),!1),O=(s,l)=>({orderId:s,items:r.items,customerInfo:{...r.userPreferences,location:m,specialInstructions:P},subtotal:n,deliveryFee:b,discount:j,total:h,paymentMethod:l,estimatedDelivery:T,orderDate:new Date().toISOString()}),A=(s,l)=>{const u={orderId:s,orderDate:new Date().toISOString(),items:r.items,deliveryLocation:m,deliveryFee:b,subtotal:n,discount:j,total:h,paymentMethod:l,status:"pending"};Z(u)},K=()=>{if(!F())return;const s=$(),l=te(s,r.items,{...r.userPreferences,location:m,specialInstructions:P},n,b,h,"Pay on Delivery");A(s,"whatsapp");const u=O(s,"whatsapp");window.open(ae(l),"_blank"),a(),x("/order-confirmation",{state:u})},X=()=>{if(F())if(typeof window.FlutterwaveCheckout!="function"){const s=document.createElement("script");s.src="https://checkout.flutterwave.com/v3.js",s.async=!0,s.onload=()=>_(),document.body.appendChild(s)}else _()},_=()=>{k(!0);const s=$(),l={public_key:he,tx_ref:s,amount:h,currency:"UGX",payment_options:"card,mobilemoneyuganda,ussd",customer:{email:`${r.userPreferences.phone.replace(/\D/g,"")}@9yards.co.ug`,phone_number:r.userPreferences.phone,name:r.userPreferences.name},customizations:{title:"9Yards Food",description:`Order ${s}`,logo:"https://food.9yards.co.ug/logo.png"},callback:u=>{if(k(!1),u.status==="successful"){A(s,"online");const Q=O(s,"online");a(),x("/order-confirmation",{state:Q}),o.success("Payment successful!")}else o.error("Payment failed. Please try again.")},onclose:()=>{k(!1)}};window.FlutterwaveCheckout(l)};return r.items.length===0?e.jsxs("div",{className:"min-h-screen bg-background pb-20 lg:pb-0",children:[e.jsx(R,{}),e.jsx("main",{className:"pt-20 md:pt-24",children:e.jsx("div",{className:"container-custom section-padding text-center",children:e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ne,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Your Cart is Empty"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Looks like you haven't added any items yet. Explore our menu and build your perfect meal!"}),e.jsxs(q,{to:"/menu",className:"btn-secondary inline-flex items-center gap-2",children:["Browse Menu",e.jsx(oe,{className:"w-5 h-5"})]})]})})}),e.jsx(H,{}),e.jsx(L,{})]}):e.jsxs("div",{className:"min-h-screen bg-background pb-20 lg:pb-0",children:[e.jsx(R,{}),e.jsx("main",{className:"pt-20 md:pt-24",children:e.jsxs("div",{className:"container-custom section-padding",children:[e.jsxs(g.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-2xl md:text-3xl font-bold text-foreground mb-8",children:["Your Cart (",r.items.length," items)"]}),E&&e.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex items-start gap-3",children:[e.jsx(fe,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Peak Hours"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["High demand right now! Delivery may take ",T,"."]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.items.map((s,l)=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"card-premium p-4 md:p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-muted rounded-xl flex-shrink-0 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸ½ï¸"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-bold text-foreground mb-1",children:[s.mainDishes.join(" + ")," Combo"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[s.sauce?.name," (",s.sauce?.preparation,","," ",s.sauce?.size,") + ",s.sideDish]}),s.extras.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+ ",s.extras.map(u=>`${u.name} (${u.quantity})`).join(", ")]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("span",{className:"text-secondary font-bold",children:d(s.totalPrice*s.quantity)}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-lg p-1",children:[e.jsx("button",{onClick:()=>c(s.id,Math.max(1,s.quantity-1)),className:"w-10 h-10 rounded-md flex items-center justify-center hover:bg-background transition-colors","aria-label":"Decrease quantity",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-medium","aria-label":`Quantity: ${s.quantity}`,children:s.quantity}),e.jsx("button",{onClick:()=>c(s.id,s.quantity+1),className:"w-10 h-10 rounded-md flex items-center justify-center hover:bg-background transition-colors","aria-label":"Increase quantity",children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>i(s.id),className:"w-11 h-11 rounded-lg bg-destructive/10 text-destructive flex items-center justify-center hover:bg-destructive/20 transition-colors","aria-label":"Remove item",children:e.jsx(le,{className:"w-4 h-4"})})]})]})]})]})},s.id)),e.jsxs(q,{to:"/menu",className:"inline-flex items-center gap-2 text-secondary font-medium hover:underline",children:[e.jsx(U,{className:"w-4 h-4"}),"Add More Items"]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card-premium p-6 sticky top-28",children:[e.jsx("h2",{className:"text-lg font-bold text-foreground mb-6",children:"Order Summary"}),!y&&e.jsxs("div",{className:"mb-6 p-4 bg-secondary/10 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xe,{className:"w-4 h-4 text-secondary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Free Delivery Progress"})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-secondary rounded-full transition-all",style:{width:`${Math.min(100,n/C*100)}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Spend"," ",e.jsx("span",{className:"font-semibold text-secondary",children:d(C-n)})," ","more for free delivery!"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground mb-2 block",children:[e.jsx(J,{className:"w-4 h-4 inline mr-1"}),"Delivery Zone *"]}),e.jsxs("select",{value:m,onChange:s=>Y(s.target.value),className:"w-full p-3 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary",children:[e.jsx("option",{value:"",children:"Select your area"}),D.map(s=>e.jsxs("option",{value:s.name,children:[s.name," - ",d(s.fee)," (",s.estimatedTime,")"]},s.name))]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Your Name *"}),e.jsx("input",{type:"text",value:r.userPreferences.name,onChange:s=>v({name:s.target.value}),placeholder:"Enter your name",className:"w-full p-3 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:r.userPreferences.phone,onChange:s=>v({phone:s.target.value}),placeholder:"+256 700 000 000",className:"w-full p-3 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Delivery Address *"}),e.jsx("textarea",{value:r.userPreferences.address,onChange:s=>v({address:s.target.value}),placeholder:"Enter delivery address",rows:2,className:"w-full p-3 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Special Instructions (Optional)"}),e.jsx("textarea",{value:P,onChange:s=>z(s.target.value),placeholder:"Gate code, landmarks, special requests...",rows:2,className:"w-full p-3 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary resize-none"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Promo Code"}),t?.valid?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:t.code})]}),e.jsx("button",{onClick:G,className:"text-green-600 hover:text-green-800","aria-label":"Remove promo code",children:e.jsx(se,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:N,onChange:s=>M(s.target.value.toUpperCase()),placeholder:"Enter code",className:"flex-1 p-3 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary"}),e.jsx("button",{onClick:B,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"Apply"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Try: FIRST10, SAVE5K, or FREESHIP"})]}),e.jsxs("div",{className:"space-y-3 mb-6 pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsx("span",{className:"text-foreground",children:d(n)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Delivery Fee"}),e.jsx("span",{className:"text-foreground",children:y||t?.valid&&t.discountType==="free_delivery"?e.jsx("span",{className:"text-secondary font-medium",children:"FREE"}):m?d(f):"Select zone"})]}),t?.valid&&t.discountType!=="free_delivery"&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-green-600",children:"Discount"}),e.jsxs("span",{className:"text-green-600",children:["-",d(j)]})]}),e.jsxs("div",{className:"flex justify-between pt-3 border-t border-border",children:[e.jsx("span",{className:"font-bold text-foreground",children:"Total"}),e.jsx("span",{className:"font-bold text-xl text-secondary",children:d(h)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:K,disabled:w,className:"w-full btn-secondary flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(ce,{className:"w-5 h-5"}),"Order via WhatsApp"]}),e.jsx("button",{onClick:X,disabled:w,className:"w-full btn-outline flex items-center justify-center gap-2 disabled:opacity-50",children:w?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-5 h-5"}),"Pay Online"]})})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center justify-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),"Estimated delivery: ",T]}),E&&e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"(Peak hours - may take longer)"})]})]})})]})]})}),e.jsx(H,{}),e.jsx(L,{})]})}export{Re as default};
